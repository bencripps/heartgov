define("utilities",["groupTable","textTable"],function(groupTable,textTable){"use strict";var utilities={redirect:function(a){window.location.pathname=a},ajax:function(a,b,c,d){var e,f=new XMLHttpRequest,g=a?JSON.stringify(a):void 0,h="application/json";f.open(b,c,!0),f.setRequestHeader("Content-Type",h),f.onreadystatechange=function(){4===f.readyState&&(e=JSON.parse(f.response),d&&d(e))},f.send(g)},showModal:function(a,b){var c=b?b:".hgov-modal",d=b?".hgov-modal-body":".hgov-modal-body-all";document.querySelector(d).innerHTML=a.result,$(c).modal("show")},resetState:function(a){Array.prototype.forEach.call(document.querySelectorAll(a),function(a){a.style.display="none"})},preloadImages:function(){Array.prototype.forEach.call(document.querySelectorAll("#all-image-src span"),function(a){var b=document.createElement("img");b.src=a.innerHTML})},modalPrompt:function(a,b,c){c&&(document.querySelector(c.selector).outerHTML=document.querySelector(c.selector).outerHTML,document.querySelector(c.selector).addEventListener(c.eventType,c.func)),$(this.modals[a]).modal(b)},getCurrentUserName:function(){return document.getElementById("hgov-user-information").innerHTML},getCurrentUserLevel:function(){return eval(document.querySelector(".hgov-key").innerHTML)},modals:{general:".hgov-modal",textReply:".hgov-reply-modal",addPhoneNumberToGroup:".hgov-group-modal",createGroup:".hgov-create-group-modal",textDetails:".hgov-text-details",groupDetails:".hgov-group-details",importNum:".hgov-import-group-modal"},closest:function(a,b){for(var c=b.matches||b.webkitMatchesSelector||b.mozMatchesSelector||b.msMatchesSelector;b;){if(c.call(b,a))return b;b=b.parentElement}return!1},reactClasses:{getGroupTable:function(a,b){return groupTable.init(a,utilities,b)},getTextTable:function(a,b){textTable.init(a,utilities,b)}},getFormGroup:function(a,b,c,d){var e=document.createElement("div"),f=document.createElement("div"),g=document.createElement("div"),h=document.createElement("input"),i=document.createElement("span");return e.className="form-group",f.className="input-group hgov-form-group",g.className="input-group-addon hgov-form-label",h.className="form-control input-sm hgov-disabled",i.className="glyphicon glyphicon-remove del",g.innerHTML=a,d&&(i.addEventListener("click",this.removeFormGroup.bind(this,e)),g.appendChild(i)),h.value=b,h.disabled=c,f.appendChild(g),f.appendChild(h),e.appendChild(f),e},removeFormGroup:function(a){a.remove()},uploadFile:function(a,b){var c=document.getElementById(a),d=b.selectedOptions.valueOf()[0].value,e=new FileReader;0!==c.files.length&&(c.files[0].name.match(".csv")?(e.onload=function(a){utilities.ajax({data:a.target.result,group:d},"post","/upload/import",function(a){utilities.modalPrompt("importNum","hide"),utilities.showModal({result:"Your file has been successfully uploaded"})})},e.readAsText(c.files[0])):(utilities.modalPrompt("importNum","hide"),utilities.showModal({result:"Only CSV are accepted (.csv)."})))},initContextSwitcher:function(){var a=document.querySelector('[name="context-switcher"]');a&&a.addEventListener("change",function(a){location.pathname=a.target.value+location.pathname.substring(location.pathname.lastIndexOf("/"),location.pathname.length)})},setLoading:function(a,b){var c=document.querySelector("#hgov-spinner-wrap");a?(b.appendChild(c),b.firstChild.classList.add("is-loading"),c.style.display="inline-block"):(b.firstChild.classList.remove("is-loading"),c.style.display="none")}};return utilities});