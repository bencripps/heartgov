define("groupModel",["utilities"],function(a){"use strict";var b={create:function(a,b){var c=this.model(a),d={values:c,save:this.listeners.save.bind(this,c)};return d},model:function(a){var b=[{id:"id",visible:!1,editable:!1,internalValue:a._id,value:a._id,label:"id"},{id:"creatorEmailAddress",visible:!0,editable:!1,internalValue:a.creator.emailAddress,value:a.creator.emailAddress,label:"Creator Email Address"},{id:"creatorId",visible:!1,editable:!1,value:a.creator.id,label:"Creator Id"},{id:"creatorUsername",visible:!0,editable:!1,internalValue:a.creator.username,value:a.creator.username,label:"Creator Username"},{id:"dateCreated",visible:!0,editable:!1,internalValue:a.dateCreated,value:new Date(a.dateCreated),label:"Date Created"},{id:"groupId",visible:!1,editable:!1,internalValue:a.groupId,value:a.groupId,label:"Group Id"},{id:"groupName",visible:!0,editable:!0,internalValue:a.groupName,value:a.groupName,label:"Group Name"},{id:"organizationId",visible:!1,editable:!1,internalValue:a.organization.id,value:a.organization.id,label:"Group Id"},{id:"organizationName",visible:!0,editable:!0,internalValue:a.organization.name,value:a.organization.name,label:"Organization Name"},{value:a.associatedUsers.map(function(a){return{value:a}}),id:"assoc-users",iterable:!0,visible:!0,editable:!1,label:"Username",validator:function(a){return a.length>4}},{value:a.associatedPhoneNumbers.map(function(a){return{value:a}}),id:"assoc-numbers",iterable:!0,visible:!0,editable:!1,label:"Phone Number",validator:function(a){return 10===a.length}}];return this.listeners.edit(b),b},listeners:{edit:function(a){a.forEach(function(c){c.visible&&c.editable&&!c.iterable&&b.helpers.attachEvent("group-details-form",c,a)})},editListener:function(a,b,c){a.iterable||(b[b.map(function(a){return a.id}).indexOf(c.target.name)].value=c.target.value)},save:function(b,c){a.ajax({data:this.helpers.saveUsersAndNumbers(b),username:a.getCurrentUserName()},"post","/edit/group",function(b){b.result?a.showModal(b):(a.showModal({result:"This group has been successfully updated!"}),c.setState({groups:b.groups}))})}},helpers:{attachEvent:function(a,c,d){var e=document.querySelector('form[name="'+a+'"] input[name="'+c.id+'"]');e.addEventListener("keyup",b.listeners.editListener.bind(this,c,d),!1)},saveUsersAndNumbers:function(a){return a.filter(function(a){return a.iterable}).forEach(function(b){var c=[],d=a.map(function(a){return a.id}).indexOf(b.id);Array.prototype.forEach.call(document.querySelectorAll('form[name="'+b.id+'"] input'),function(a){b.validator(a.value)&&c.push(a.value)}),a[d].value=c}),a}}};return b});